<!DOCTYPE html>
<html>
  <head>
     <title>User Profile</title>
     <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
        <script src='./lib/js/fhir-client-v0.1.12.js'></script>
  </head>
  <body>
     <pre></pre>
        <script type="text/javascript">
            function log(txt) {
                document.getElementsByTagName("pre")[0].innerText += txt + "\n";
            }
            alert(client);  
            FHIR.oauth2.ready(function(client) {                
                $.when(client.user.read()).then(
                    function(user){
                        log("User:\n" + JSON.stringify(user, null, 4) + "\n");
                        log("Token Response:\n" + JSON.stringify(client.tokenResponse, null, 4));
                    },
                    function(error){
                        log("Error:\n" + error);
                    }
                );
            });
        </script>
  </body>
</html>
